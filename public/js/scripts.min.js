"use strict";function ready(e){"loading"!=document.readyState?(e(),console.log(document.readyState)):document.addEventListener("DOMContentLoaded",e)}function outerElementHeight(e){var t=e.offsetHeight,o=getComputedStyle(e);return t+=parseInt(o.marginTop)+parseInt(o.marginBottom)}var tab=function(){var e=document.querySelectorAll(".tab-nav"),t=document.querySelectorAll(".tab-content");function o(o){o.preventDefault(),e.forEach((function(e){e.classList.remove("active")})),this.classList.add("active"),function(e){t.forEach((function(t){var o=t.classList;o.contains(e)?o.add("tab-content__active"):o.remove("tab-content__active")}))}(this.getAttribute("data-tab-name"))}[].forEach.call(e,(function(e){e.addEventListener("click",o)}))},mobileFilter=function(){var e,t=document.querySelector(".page-filter"),o=t.firstElementChild,n=t.querySelector(".page-filter__body"),i=t.querySelector(".page-filter__buttons"),c=document.querySelector(".site-header"),r=document.querySelector(".site-navigation"),l=document.querySelector(".page-top__switchers"),s=outerElementHeight(document.querySelector(".page-top"))+10;e=c&&r&&s?c.offsetHeight+r.offsetHeight+s:s,window.innerWidth<992?(t.classList.add("mobile"),o&&o.classList.add("container"),t.style.top=e+"px",n&&(n.style.height=window.outerHeight-e-i.scrollHeight+"px")):(document.querySelector(".page-top__filter")&&document.querySelector(".page-top__filter").classList.remove("active"),t.classList.remove("mobile","show"),l&&l.classList.remove("fixed"),o&&o.classList.remove("container"),document.body.classList.remove("no-scroll"),t.style.top=null,n&&(n.style.height=null)),window.addEventListener("scroll",(function(){window.innerWidth<992&&(window.pageYOffset>l.offsetTop?(l&&l.classList.add("fixed"),t.style.top=l.offsetHeight+"px",n.style.height=window.outerHeight-l.offsetHeight-i.scrollHeight+"px"):(l&&l.classList.remove("fixed"),t.style.top=e+"px",n.style.height=window.outerHeight-e-i.scrollHeight+"px"))}))},showMobileFilter=function(){var e=document.querySelector(".page-top__filter"),t=document.querySelector(".page-filter"),o=t.querySelector(".page-filter__wrapper");e&&e.addEventListener("click",(function(e){e.preventDefault(),this.classList.toggle("active"),t.classList.toggle("show"),document.body.classList.toggle("no-scroll")})),document.addEventListener("click",(function(n){e&&(e.contains(n.target)||o.contains(n.target)||(e.classList.remove("active"),t.classList.remove("show"),document.body.classList.remove("no-scroll")))}))};function init(){console.log("DOMContentLoaded"),document.querySelector(".wow")&&(new WOW).init();[].slice.call(document.querySelectorAll('[data-toggle="popover"]')).map((function(e){return new bootstrap.Popover(e,{trigger:"hover"})})),[].slice.call(document.querySelectorAll(".collapse")).map((function(e){return new bootstrap.Collapse(e,{toggle:!1})}));objectFitImages("img");var e=document.querySelector(".page-filter__category-more");e&&e.addEventListener("click",(function(){this.previousElementSibling.classList.contains("show")?this.textContent="Показать еще ("+this.dataset.count+")":this.textContent="Свернуть"}));var t,o=document.querySelectorAll(".proximity input"),n=document.getElementById("any");[].forEach.call(o,(function(e){!0===n.checked&&(e.checked=!0),n.addEventListener("click",(function(){this!==e&&(e.checked=!0),this.checked=!0})),e.addEventListener("click",(function(){var e;if(this!==n&&n.checked){for(e=0;e<o.length;e++)o[e].checked=!1;this.checked=!0}else{var t=[];for(e=0;e<o.length-1;e++)o[e].checked&&t.push(e);t.length===o.length-1&&(n.checked=!0)}}))})),tab(),document.querySelector(".page-filter")&&mobileFilter(),document.querySelector(".page-filter")&&showMobileFilter(),window.addEventListener("resize",(function(){document.querySelector(".page-filter")&&mobileFilter()})),document.getElementById("post-map")&&ymaps.ready((function(){t=new ymaps.Map("post-map",{center:[55.75399399999374,37.62209300000001],zoom:10,controls:[]},{searchControlProvider:"yandex#search"});var e=new ymaps.Placemark([55.76288506899503,37.531872999999884],{},{iconLayout:"default#image",iconImageHref:"img/icons/home.svg",iconImageSize:[46,46],iconImageOffset:[-23,-23]});t.geoObjects.add(e)}))}ready(init);